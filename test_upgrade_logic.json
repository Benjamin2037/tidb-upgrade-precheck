[
  {
    "version": 3,
    "function": "upgradeToVer3",
    "changes": [
      {
        "type": "SQL",
        "sql": "UPDATE HIGH_PRIORITY %n.%n SET variable_value = '0' WHERE variable_name = 'tx_read_only';",
        "location": "../tidb/pkg/session/upgrade.go:687:17"
      }
    ]
  },
  {
    "version": 6,
    "function": "upgradeToVer6",
    "changes": [
      {
        "type": "SQL",
        "sql": "ALTER TABLE mysql.user ADD COLUMN `Super_priv` ENUM('N','Y') CHARACTER SET utf8 NOT NULL DEFAULT 'N' AFTER `Show_db_priv`",
        "location": "../tidb/pkg/session/upgrade.go:701:20"
      },
      {
        "type": "SQL",
        "sql": "UPDATE HIGH_PRIORITY mysql.user SET Super_priv='Y'",
        "location": "../tidb/pkg/session/upgrade.go:703:17"
      }
    ]
  },
  {
    "version": 7,
    "function": "upgradeToVer7",
    "changes": [
      {
        "type": "SQL",
        "sql": "ALTER TABLE mysql.user ADD COLUMN `Process_priv` ENUM('N','Y') CHARACTER SET utf8 NOT NULL DEFAULT 'N' AFTER `Drop_priv`",
        "location": "../tidb/pkg/session/upgrade.go:707:20"
      },
      {
        "type": "SQL",
        "sql": "UPDATE HIGH_PRIORITY mysql.user SET Process_priv='Y'",
        "location": "../tidb/pkg/session/upgrade.go:709:17"
      }
    ]
  },
  {
    "version": 9,
    "function": "upgradeToVer9",
    "changes": [
      {
        "type": "SQL",
        "sql": "ALTER TABLE mysql.user ADD COLUMN `Trigger_priv` ENUM('N','Y') CHARACTER SET utf8 NOT NULL DEFAULT 'N' AFTER `Create_user_priv`",
        "location": "../tidb/pkg/session/upgrade.go:722:20"
      },
      {
        "type": "SQL",
        "sql": "UPDATE HIGH_PRIORITY mysql.user SET Trigger_priv='Y'",
        "location": "../tidb/pkg/session/upgrade.go:724:17"
      }
    ]
  },
  {
    "version": 10,
    "function": "upgradeToVer10",
    "changes": [
      {
        "type": "SQL",
        "sql": "ALTER TABLE mysql.stats_buckets CHANGE COLUMN `value` `upper_bound` BLOB NOT NULL",
        "location": "../tidb/pkg/session/upgrade.go:743:20"
      },
      {
        "type": "SQL",
        "sql": "ALTER TABLE mysql.stats_buckets ADD COLUMN `lower_bound` BLOB",
        "location": "../tidb/pkg/session/upgrade.go:744:20"
      },
      {
        "type": "SQL",
        "sql": "ALTER TABLE mysql.stats_histograms ADD COLUMN `null_count` BIGINT(64) NOT NULL DEFAULT 0",
        "location": "../tidb/pkg/session/upgrade.go:745:20"
      },
      {
        "type": "SQL",
        "sql": "ALTER TABLE mysql.stats_histograms DROP COLUMN distinct_ratio",
        "location": "../tidb/pkg/session/upgrade.go:746:20"
      },
      {
        "type": "SQL",
        "sql": "ALTER TABLE mysql.stats_histograms DROP COLUMN use_count_to_estimate",
        "location": "../tidb/pkg/session/upgrade.go:747:20"
      }
    ]
  },
  {
    "version": 11,
    "function": "upgradeToVer11",
    "changes": [
      {
        "type": "SQL",
        "sql": "ALTER TABLE mysql.user ADD COLUMN `References_priv` ENUM('N','Y') CHARACTER SET utf8 NOT NULL DEFAULT 'N' AFTER `Grant_priv`",
        "location": "../tidb/pkg/session/upgrade.go:751:20"
      },
      {
        "type": "SQL",
        "sql": "UPDATE HIGH_PRIORITY mysql.user SET References_priv='Y'",
        "location": "../tidb/pkg/session/upgrade.go:752:17"
      }
    ]
  },
  {
    "version": 13,
    "function": "upgradeToVer13",
    "changes": [
      {
        "type": "SQL",
        "sql": "UPDATE HIGH_PRIORITY mysql.user SET Create_tmp_table_priv='Y',Lock_tables_priv='Y',Create_routine_priv='Y',Alter_routine_priv='Y',Event_priv='Y' WHERE Super_priv='Y'",
        "location": "../tidb/pkg/session/upgrade.go:810:17"
      },
      {
        "type": "SQL",
        "sql": "UPDATE HIGH_PRIORITY mysql.user SET Create_view_priv='Y',Show_view_priv='Y' WHERE Create_priv='Y'",
        "location": "../tidb/pkg/session/upgrade.go:811:17"
      }
    ]
  },
  {
    "version": 16,
    "function": "upgradeToVer16",
    "changes": [
      {
        "type": "SQL",
        "sql": "ALTER TABLE mysql.stats_histograms ADD COLUMN `cm_sketch` BLOB",
        "location": "../tidb/pkg/session/upgrade.go:836:20"
      }
    ]
  },
  {
    "version": 17,
    "function": "upgradeToVer17",
    "changes": [
      {
        "type": "SQL",
        "sql": "ALTER TABLE mysql.user MODIFY User CHAR(32)",
        "location": "../tidb/pkg/session/upgrade.go:840:20"
      }
    ]
  },
  {
    "version": 18,
    "function": "upgradeToVer18",
    "changes": [
      {
        "type": "SQL",
        "sql": "ALTER TABLE mysql.stats_histograms ADD COLUMN `tot_col_size` BIGINT(64) NOT NULL DEFAULT 0",
        "location": "../tidb/pkg/session/upgrade.go:844:20"
      }
    ]
  },
  {
    "version": 19,
    "function": "upgradeToVer19",
    "changes": [
      {
        "type": "SQL",
        "sql": "ALTER TABLE mysql.db MODIFY User CHAR(32)",
        "location": "../tidb/pkg/session/upgrade.go:848:20"
      },
      {
        "type": "SQL",
        "sql": "ALTER TABLE mysql.tables_priv MODIFY User CHAR(32)",
        "location": "../tidb/pkg/session/upgrade.go:849:20"
      },
      {
        "type": "SQL",
        "sql": "ALTER TABLE mysql.columns_priv MODIFY User CHAR(32)",
        "location": "../tidb/pkg/session/upgrade.go:850:20"
      }
    ]
  },
  {
    "version": 21,
    "function": "upgradeToVer21",
    "changes": [
      {
        "type": "SQL",
        "sql": "ALTER TABLE mysql.gc_delete_range DROP INDEX job_id",
        "location": "../tidb/pkg/session/upgrade.go:861:20"
      },
      {
        "type": "SQL",
        "sql": "ALTER TABLE mysql.gc_delete_range ADD UNIQUE INDEX delete_range_index (job_id, element_id)",
        "location": "../tidb/pkg/session/upgrade.go:862:20"
      },
      {
        "type": "SQL",
        "sql": "ALTER TABLE mysql.gc_delete_range DROP INDEX element_id",
        "location": "../tidb/pkg/session/upgrade.go:863:20"
      }
    ]
  },
  {
    "version": 22,
    "function": "upgradeToVer22",
    "changes": [
      {
        "type": "SQL",
        "sql": "ALTER TABLE mysql.stats_histograms ADD COLUMN `stats_ver` BIGINT(64) NOT NULL DEFAULT 0",
        "location": "../tidb/pkg/session/upgrade.go:867:20"
      }
    ]
  },
  {
    "version": 23,
    "function": "upgradeToVer23",
    "changes": [
      {
        "type": "SQL",
        "sql": "ALTER TABLE mysql.stats_histograms ADD COLUMN `flag` BIGINT(64) NOT NULL DEFAULT 0",
        "location": "../tidb/pkg/session/upgrade.go:871:20"
      }
    ]
  },
  {
    "version": 26,
    "function": "upgradeToVer26",
    "changes": [
      {
        "type": "SQL",
        "sql": "ALTER TABLE mysql.user ADD COLUMN `Create_role_priv` ENUM('N','Y') DEFAULT 'N'",
        "location": "../tidb/pkg/session/upgrade.go:900:20"
      },
      {
        "type": "SQL",
        "sql": "ALTER TABLE mysql.user ADD COLUMN `Drop_role_priv` ENUM('N','Y') DEFAULT 'N'",
        "location": "../tidb/pkg/session/upgrade.go:901:20"
      },
      {
        "type": "SQL",
        "sql": "ALTER TABLE mysql.user ADD COLUMN `Account_locked` ENUM('N','Y') DEFAULT 'N'",
        "location": "../tidb/pkg/session/upgrade.go:902:20"
      },
      {
        "type": "SQL",
        "sql": "UPDATE HIGH_PRIORITY mysql.user SET Create_role_priv='Y',Drop_role_priv='Y' WHERE Create_user_priv='Y'",
        "location": "../tidb/pkg/session/upgrade.go:904:17"
      },
      {
        "type": "SQL",
        "sql": "UPDATE HIGH_PRIORITY mysql.user SET Create_view_priv='Y',Show_view_priv='Y' WHERE Create_priv='Y'",
        "location": "../tidb/pkg/session/upgrade.go:906:17"
      }
    ]
  },
  {
    "version": 27,
    "function": "upgradeToVer27",
    "changes": [
      {
        "type": "SQL",
        "sql": "ALTER TABLE mysql.stats_histograms ADD COLUMN `correlation` DOUBLE NOT NULL DEFAULT 0",
        "location": "../tidb/pkg/session/upgrade.go:910:20"
      }
    ]
  },
  {
    "version": 29,
    "function": "upgradeToVer29",
    "changes": [
      {
        "type": "SQL",
        "sql": "ALTER TABLE mysql.bind_info CHANGE create_time create_time TIMESTAMP(3)",
        "location": "../tidb/pkg/session/upgrade.go:922:20"
      },
      {
        "type": "SQL",
        "sql": "ALTER TABLE mysql.bind_info CHANGE update_time update_time TIMESTAMP(3)",
        "location": "../tidb/pkg/session/upgrade.go:923:20"
      },
      {
        "type": "SQL",
        "sql": "ALTER TABLE mysql.bind_info ADD INDEX sql_index (original_sql(1024),default_db(1024))",
        "location": "../tidb/pkg/session/upgrade.go:924:20"
      }
    ]
  },
  {
    "version": 31,
    "function": "upgradeToVer31",
    "changes": [
      {
        "type": "SQL",
        "sql": "ALTER TABLE mysql.stats_histograms ADD COLUMN `last_analyze_pos` BLOB DEFAULT NULL",
        "location": "../tidb/pkg/session/upgrade.go:932:20"
      }
    ]
  },
  {
    "version": 32,
    "function": "upgradeToVer32",
    "changes": [
      {
        "type": "SQL",
        "sql": "ALTER TABLE mysql.tables_priv MODIFY table_priv SET('Select','Insert','Update','Delete','Create','Drop','Grant', 'Index', 'Alter', 'Create View', 'Show View', 'Trigger', 'References')",
        "location": "../tidb/pkg/session/upgrade.go:936:20"
      }
    ]
  },
  {
    "version": 36,
    "function": "upgradeToVer36",
    "changes": [
      {
        "type": "SQL",
        "sql": "ALTER TABLE mysql.user ADD COLUMN `Shutdown_priv` ENUM('N','Y') DEFAULT 'N'",
        "location": "../tidb/pkg/session/upgrade.go:954:20"
      },
      {
        "type": "SQL",
        "sql": "UPDATE HIGH_PRIORITY mysql.user SET Shutdown_priv='Y' WHERE Super_priv='Y'",
        "location": "../tidb/pkg/session/upgrade.go:956:17"
      },
      {
        "type": "SQL",
        "sql": "UPDATE HIGH_PRIORITY mysql.user SET Create_tmp_table_priv='Y',Lock_tables_priv='Y',Create_routine_priv='Y',Alter_routine_priv='Y',Event_priv='Y' WHERE Super_priv='Y'",
        "location": "../tidb/pkg/session/upgrade.go:957:17"
      }
    ]
  },
  {
    "version": 41,
    "function": "upgradeToVer41",
    "changes": [
      {
        "type": "SQL",
        "sql": "ALTER TABLE mysql.user CHANGE `password` `authentication_string` TEXT",
        "location": "../tidb/pkg/session/upgrade.go:988:20"
      },
      {
        "type": "SQL",
        "sql": "ALTER TABLE mysql.user ADD COLUMN `password` TEXT as (`authentication_string`)",
        "location": "../tidb/pkg/session/upgrade.go:989:20"
      }
    ]
  },
  {
    "version": 42,
    "function": "upgradeToVer42",
    "changes": [
      {
        "type": "SQL",
        "sql": "ALTER TABLE mysql.expr_pushdown_blacklist ADD COLUMN `store_type` CHAR(100) NOT NULL DEFAULT 'tikv,tiflash,tidb'",
        "location": "../tidb/pkg/session/upgrade.go:999:20"
      },
      {
        "type": "SQL",
        "sql": "ALTER TABLE mysql.expr_pushdown_blacklist ADD COLUMN `reason` VARCHAR(200)",
        "location": "../tidb/pkg/session/upgrade.go:1000:20"
      }
    ]
  },
  {
    "version": 44,
    "function": "upgradeToVer44",
    "changes": [
      {
        "type": "SQL",
        "sql": "DELETE FROM mysql.global_variables where variable_name = \"tidb_isolation_read_engines\"",
        "location": "../tidb/pkg/session/upgrade.go:1020:17"
      }
    ]
  },
  {
    "version": 45,
    "function": "upgradeToVer45",
    "changes": [
      {
        "type": "SQL",
        "sql": "ALTER TABLE mysql.user ADD COLUMN `Config_priv` ENUM('N','Y') DEFAULT 'N'",
        "location": "../tidb/pkg/session/upgrade.go:1024:20"
      },
      {
        "type": "SQL",
        "sql": "UPDATE HIGH_PRIORITY mysql.user SET Config_priv='Y' WHERE Super_priv='Y'",
        "location": "../tidb/pkg/session/upgrade.go:1025:17"
      }
    ]
  },
  {
    "version": 46,
    "function": "upgradeToVer46",
    "changes": [
      {
        "type": "SQL",
        "sql": "ALTER TABLE mysql.user ADD COLUMN `Reload_priv` ENUM('N','Y') DEFAULT 'N'",
        "location": "../tidb/pkg/session/upgrade.go:1031:20"
      },
      {
        "type": "SQL",
        "sql": "ALTER TABLE mysql.user ADD COLUMN `File_priv` ENUM('N','Y') DEFAULT 'N'",
        "location": "../tidb/pkg/session/upgrade.go:1032:20"
      },
      {
        "type": "SQL",
        "sql": "UPDATE HIGH_PRIORITY mysql.user SET Reload_priv='Y' WHERE Super_priv='Y'",
        "location": "../tidb/pkg/session/upgrade.go:1033:17"
      },
      {
        "type": "SQL",
        "sql": "UPDATE HIGH_PRIORITY mysql.user SET File_priv='Y' WHERE Super_priv='Y'",
        "location": "../tidb/pkg/session/upgrade.go:1034:17"
      }
    ]
  },
  {
    "version": 47,
    "function": "upgradeToVer47",
    "changes": [
      {
        "type": "SQL",
        "sql": "ALTER TABLE mysql.bind_info ADD COLUMN `source` varchar(10) NOT NULL default 'unknown'",
        "location": "../tidb/pkg/session/upgrade.go:1038:20"
      }
    ]
  },
  {
    "version": 52,
    "function": "upgradeToVer52",
    "changes": [
      {
        "type": "SQL",
        "sql": "ALTER TABLE mysql.stats_histograms MODIFY cm_sketch BLOB(6291456)",
        "location": "../tidb/pkg/session/upgrade.go:1046:20"
      }
    ]
  },
  {
    "version": 60,
    "function": "upgradeToVer60",
    "changes": [
      {
        "type": "SQL",
        "sql": "DROP TABLE IF EXISTS mysql.stats_extended",
        "location": "../tidb/pkg/session/upgrade.go:1153:17"
      }
    ]
  },
  {
    "version": 62,
    "function": "upgradeToVer62",
    "changes": [
      {
        "type": "SQL",
        "sql": "ALTER TABLE mysql.stats_buckets ADD COLUMN `ndv` bigint not null default 0",
        "location": "../tidb/pkg/session/upgrade.go:1266:20"
      }
    ]
  },
  {
    "version": 63,
    "function": "upgradeToVer63",
    "changes": [
      {
        "type": "SQL",
        "sql": "ALTER TABLE mysql.user ADD COLUMN `Create_tablespace_priv` ENUM('N','Y') DEFAULT 'N'",
        "location": "../tidb/pkg/session/upgrade.go:1270:20"
      },
      {
        "type": "SQL",
        "sql": "UPDATE HIGH_PRIORITY mysql.user SET Create_tablespace_priv='Y' where Super_priv='Y'",
        "location": "../tidb/pkg/session/upgrade.go:1271:17"
      }
    ]
  },
  {
    "version": 64,
    "function": "upgradeToVer64",
    "changes": [
      {
        "type": "SQL",
        "sql": "ALTER TABLE mysql.user ADD COLUMN `Repl_slave_priv` ENUM('N','Y') CHARACTER SET utf8 NOT NULL DEFAULT 'N' AFTER `Execute_priv`",
        "location": "../tidb/pkg/session/upgrade.go:1275:20"
      },
      {
        "type": "SQL",
        "sql": "ALTER TABLE mysql.user ADD COLUMN `Repl_client_priv` ENUM('N','Y') CHARACTER SET utf8 NOT NULL DEFAULT 'N' AFTER `Repl_slave_priv`",
        "location": "../tidb/pkg/session/upgrade.go:1276:20"
      },
      {
        "type": "SQL",
        "sql": "UPDATE HIGH_PRIORITY mysql.user SET Repl_slave_priv='Y',Repl_client_priv='Y' where Super_priv='Y'",
        "location": "../tidb/pkg/session/upgrade.go:1277:17"
      }
    ]
  },
  {
    "version": 66,
    "function": "upgradeToVer66",
    "changes": [
      {
        "type": "SQL",
        "sql": "set @@global.tidb_track_aggregate_memory_usage = 1",
        "location": "../tidb/pkg/session/upgrade.go:1285:17"
      }
    ]
  },
  {
    "version": 67,
    "function": "upgradeToVer67",
    "changes": [
      {
        "type": "SQL",
        "sql": "DELETE FROM mysql.bind_info where source != 'builtin'",
        "location": "../tidb/pkg/session/upgrade.go:1206:17"
      },
      {
        "type": "SQL",
        "sql": "INSERT INTO mysql.bind_info VALUES(%s, %s, '', %s, %s, %s, %s, %s, %s)",
        "location": "../tidb/pkg/session/upgrade.go:1208:30"
      }
    ]
  },
  {
    "version": 68,
    "function": "upgradeToVer68",
    "changes": [
      {
        "type": "SQL",
        "sql": "DELETE FROM mysql.global_variables where VARIABLE_NAME = 'tidb_enable_clustered_index' and VARIABLE_VALUE = 'OFF'",
        "location": "../tidb/pkg/session/upgrade.go:1289:17"
      }
    ]
  },
  {
    "version": 70,
    "function": "upgradeToVer70",
    "changes": [
      {
        "type": "SQL",
        "sql": "ALTER TABLE mysql.user ADD COLUMN plugin CHAR(64) AFTER authentication_string",
        "location": "../tidb/pkg/session/upgrade.go:1297:20"
      },
      {
        "type": "SQL",
        "sql": "UPDATE HIGH_PRIORITY mysql.user SET plugin='mysql_native_password'",
        "location": "../tidb/pkg/session/upgrade.go:1298:17"
      }
    ]
  },
  {
    "version": 71,
    "function": "upgradeToVer71",
    "changes": [
      {
        "type": "SQL",
        "sql": "UPDATE mysql.global_variables SET VARIABLE_VALUE='OFF' WHERE VARIABLE_NAME = 'tidb_multi_statement_mode' AND VARIABLE_VALUE = 'WARN'",
        "location": "../tidb/pkg/session/upgrade.go:1302:17"
      }
    ]
  },
  {
    "version": 72,
    "function": "upgradeToVer72",
    "changes": [
      {
        "type": "SQL",
        "sql": "ALTER TABLE mysql.stats_meta ADD COLUMN snapshot BIGINT(64) UNSIGNED NOT NULL DEFAULT 0",
        "location": "../tidb/pkg/session/upgrade.go:1306:20"
      }
    ]
  },
  {
    "version": 74,
    "function": "upgradeToVer74",
    "changes": [
      {
        "type": "SQL",
        "sql": "UPDATE mysql.global_variables SET VARIABLE_VALUE='%[1]v' WHERE VARIABLE_NAME = 'tidb_stmt_summary_max_stmt_count' AND CAST(VARIABLE_VALUE AS SIGNED) = 200",
        "location": "../tidb/pkg/session/upgrade.go:1315:29"
      }
    ]
  },
  {
    "version": 75,
    "function": "upgradeToVer75",
    "changes": [
      {
        "type": "SQL",
        "sql": "ALTER TABLE mysql.user MODIFY COLUMN Host CHAR(255)",
        "location": "../tidb/pkg/session/upgrade.go:1319:20"
      },
      {
        "type": "SQL",
        "sql": "ALTER TABLE mysql.global_priv MODIFY COLUMN Host CHAR(255)",
        "location": "../tidb/pkg/session/upgrade.go:1320:20"
      },
      {
        "type": "SQL",
        "sql": "ALTER TABLE mysql.db MODIFY COLUMN Host CHAR(255)",
        "location": "../tidb/pkg/session/upgrade.go:1321:20"
      },
      {
        "type": "SQL",
        "sql": "ALTER TABLE mysql.tables_priv MODIFY COLUMN Host CHAR(255)",
        "location": "../tidb/pkg/session/upgrade.go:1322:20"
      },
      {
        "type": "SQL",
        "sql": "ALTER TABLE mysql.columns_priv MODIFY COLUMN Host CHAR(255)",
        "location": "../tidb/pkg/session/upgrade.go:1323:20"
      }
    ]
  },
  {
    "version": 76,
    "function": "upgradeToVer76",
    "changes": [
      {
        "type": "SQL",
        "sql": "ALTER TABLE mysql.columns_priv MODIFY COLUMN Column_priv SET('Select','Insert','Update','References')",
        "location": "../tidb/pkg/session/upgrade.go:1327:20"
      }
    ]
  },
  {
    "version": 78,
    "function": "upgradeToVer78",
    "changes": [
      {
        "type": "SQL",
        "sql": "ALTER TABLE mysql.stats_buckets MODIFY upper_bound LONGBLOB NOT NULL",
        "location": "../tidb/pkg/session/upgrade.go:1335:20"
      },
      {
        "type": "SQL",
        "sql": "ALTER TABLE mysql.stats_buckets MODIFY lower_bound LONGBLOB",
        "location": "../tidb/pkg/session/upgrade.go:1336:20"
      },
      {
        "type": "SQL",
        "sql": "ALTER TABLE mysql.stats_histograms MODIFY last_analyze_pos LONGBLOB DEFAULT NULL",
        "location": "../tidb/pkg/session/upgrade.go:1337:20"
      }
    ]
  },
  {
    "version": 85,
    "function": "upgradeToVer85",
    "changes": [
      {
        "type": "SQL",
        "sql": "UPDATE HIGH_PRIORITY mysql.bind_info SET status= '%s' WHERE status = '%s'",
        "location": "../tidb/pkg/session/upgrade.go:1371:29"
      }
    ]
  },
  {
    "version": 86,
    "function": "upgradeToVer86",
    "changes": [
      {
        "type": "SQL",
        "sql": "ALTER TABLE mysql.tables_priv MODIFY COLUMN Column_priv SET('Select','Insert','Update','References')",
        "location": "../tidb/pkg/session/upgrade.go:1375:20"
      }
    ]
  },
  {
    "version": 88,
    "function": "upgradeToVer88",
    "changes": [
      {
        "type": "SQL",
        "sql": "ALTER TABLE mysql.user CHANGE `Repl_slave_priv` `Repl_slave_priv` ENUM('N','Y') NOT NULL DEFAULT 'N' AFTER `Execute_priv`",
        "location": "../tidb/pkg/session/upgrade.go:1383:20"
      },
      {
        "type": "SQL",
        "sql": "ALTER TABLE mysql.user CHANGE `Repl_client_priv` `Repl_client_priv` ENUM('N','Y') NOT NULL DEFAULT 'N' AFTER `Repl_slave_priv`",
        "location": "../tidb/pkg/session/upgrade.go:1384:20"
      }
    ]
  },
  {
    "version": 95,
    "function": "upgradeToVer95",
    "changes": [
      {
        "type": "SQL",
        "sql": "ALTER TABLE mysql.user ADD COLUMN IF NOT EXISTS `User_attributes` JSON",
        "location": "../tidb/pkg/session/upgrade.go:1442:20"
      }
    ]
  },
  {
    "version": 98,
    "function": "upgradeToVer98",
    "changes": [
      {
        "type": "SQL",
        "sql": "ALTER TABLE mysql.user ADD COLUMN IF NOT EXISTS `Token_issuer` varchar(255)",
        "location": "../tidb/pkg/session/upgrade.go:1452:20"
      }
    ]
  },
  {
    "version": 99,
    "function": "upgradeToVer99Before",
    "changes": [
      {
        "type": "SQL",
        "sql": "INSERT HIGH_PRIORITY IGNORE INTO %n.%n VALUES (%?, %?);",
        "location": "../tidb/pkg/session/upgrade.go:1456:17"
      }
    ]
  },
  {
    "version": 104,
    "function": "upgradeToVer104",
    "changes": [
      {
        "type": "SQL",
        "sql": "ALTER TABLE mysql.bind_info ADD COLUMN IF NOT EXISTS `sql_digest` varchar(64)",
        "location": "../tidb/pkg/session/upgrade.go:1489:20"
      },
      {
        "type": "SQL",
        "sql": "ALTER TABLE mysql.bind_info ADD COLUMN IF NOT EXISTS `plan_digest` varchar(64)",
        "location": "../tidb/pkg/session/upgrade.go:1490:20"
      }
    ]
  },
  {
    "version": 106,
    "function": "upgradeToVer106",
    "changes": [
      {
        "type": "SQL",
        "sql": "Alter table mysql.user add COLUMN IF NOT EXISTS `Password_reuse_history` smallint unsigned  DEFAULT NULL AFTER `Create_Tablespace_Priv` ",
        "location": "../tidb/pkg/session/upgrade.go:1500:20"
      },
      {
        "type": "SQL",
        "sql": "Alter table mysql.user add COLUMN IF NOT EXISTS `Password_reuse_time` smallint unsigned DEFAULT NULL AFTER `Password_reuse_history`",
        "location": "../tidb/pkg/session/upgrade.go:1501:20"
      }
    ]
  },
  {
    "version": 107,
    "function": "upgradeToVer107",
    "changes": [
      {
        "type": "SQL",
        "sql": "ALTER TABLE mysql.user ADD COLUMN IF NOT EXISTS `Password_expired` ENUM('N','Y') NOT NULL DEFAULT 'N'",
        "location": "../tidb/pkg/session/upgrade.go:1505:20"
      },
      {
        "type": "SQL",
        "sql": "ALTER TABLE mysql.user ADD COLUMN IF NOT EXISTS `Password_last_changed` TIMESTAMP DEFAULT CURRENT_TIMESTAMP()",
        "location": "../tidb/pkg/session/upgrade.go:1506:20"
      },
      {
        "type": "SQL",
        "sql": "ALTER TABLE mysql.user ADD COLUMN IF NOT EXISTS `Password_lifetime` SMALLINT UNSIGNED DEFAULT NULL",
        "location": "../tidb/pkg/session/upgrade.go:1507:20"
      }
    ]
  },
  {
    "version": 130,
    "function": "upgradeToVer130",
    "changes": [
      {
        "type": "SQL",
        "sql": "ALTER TABLE mysql.stats_meta_history ADD COLUMN IF NOT EXISTS `source` varchar(40) NOT NULL after `version`;",
        "location": "../tidb/pkg/session/upgrade.go:1527:20"
      }
    ]
  },
  {
    "version": 133,
    "function": "upgradeToVer133",
    "changes": [
      {
        "type": "SQL",
        "sql": "UPDATE HIGH_PRIORITY %n.%n set VARIABLE_VALUE = %? where VARIABLE_NAME = %? and VARIABLE_VALUE = %?;",
        "location": "../tidb/pkg/session/upgrade.go:1540:17"
      }
    ]
  },
  {
    "version": 134,
    "function": "upgradeToVer134",
    "changes": [
      {
        "type": "SQL",
        "sql": "UPDATE HIGH_PRIORITY %n.%n SET VARIABLE_VALUE = %? WHERE VARIABLE_NAME = %? AND VARIABLE_VALUE = %?;",
        "location": "../tidb/pkg/session/upgrade.go:1549:17"
      }
    ]
  },
  {
    "version": 136,
    "function": "upgradeToVer136",
    "changes": [
      {
        "type": "SQL",
        "sql": "ALTER TABLE mysql.tidb_background_subtask DROP INDEX namespace",
        "location": "../tidb/pkg/session/upgrade.go:1559:20"
      },
      {
        "type": "SQL",
        "sql": "ALTER TABLE mysql.tidb_background_subtask ADD INDEX idx_task_key(task_key)",
        "location": "../tidb/pkg/session/upgrade.go:1560:20"
      }
    ]
  },
  {
    "version": 140,
    "function": "upgradeToVer140",
    "changes": [
      {
        "type": "SQL",
        "sql": "ALTER TABLE mysql.tidb_global_task ADD COLUMN `task_key` VARCHAR(256) NOT NULL AFTER `id`",
        "location": "../tidb/pkg/session/upgrade.go:1575:20"
      },
      {
        "type": "SQL",
        "sql": "ALTER TABLE mysql.tidb_global_task ADD UNIQUE KEY task_key(task_key)",
        "location": "../tidb/pkg/session/upgrade.go:1576:20"
      }
    ]
  },
  {
    "version": 141,
    "function": "upgradeToVer141",
    "changes": [
      {
        "type": "SQL",
        "sql": "INSERT HIGH_PRIORITY IGNORE INTO %n.%n VALUES (%?, %?);",
        "location": "../tidb/pkg/session/upgrade.go:1597:17"
      }
    ]
  },
  {
    "version": 143,
    "function": "upgradeToVer143",
    "changes": [
      {
        "type": "SQL",
        "sql": "ALTER TABLE mysql.tidb_global_task ADD COLUMN `error` BLOB",
        "location": "../tidb/pkg/session/upgrade.go:1607:20"
      },
      {
        "type": "SQL",
        "sql": "ALTER TABLE mysql.tidb_background_subtask ADD COLUMN `error` BLOB",
        "location": "../tidb/pkg/session/upgrade.go:1608:20"
      }
    ]
  },
  {
    "version": 146,
    "function": "upgradeToVer146",
    "changes": [
      {
        "type": "SQL",
        "sql": "ALTER TABLE mysql.stats_meta_history ADD INDEX idx_create_time (create_time)",
        "location": "../tidb/pkg/session/upgrade.go:1616:20"
      },
      {
        "type": "SQL",
        "sql": "ALTER TABLE mysql.stats_history ADD INDEX idx_create_time (create_time)",
        "location": "../tidb/pkg/session/upgrade.go:1617:20"
      }
    ]
  },
  {
    "version": 167,
    "function": "upgradeToVer167",
    "changes": [
      {
        "type": "SQL",
        "sql": "ALTER TABLE mysql.tidb_background_subtask ADD COLUMN `step` INT AFTER `id`",
        "location": "../tidb/pkg/session/upgrade.go:1621:20"
      }
    ]
  },
  {
    "version": 171,
    "function": "upgradeToVer171",
    "changes": [
      {
        "type": "SQL",
        "sql": "ALTER TABLE mysql.tidb_runaway_queries CHANGE COLUMN `tidb_server` `tidb_server` varchar(512)",
        "location": "../tidb/pkg/session/upgrade.go:1637:17"
      }
    ]
  },
  {
    "version": 172,
    "function": "upgradeToVer172",
    "changes": [
      {
        "type": "SQL",
        "sql": "DROP TABLE IF EXISTS mysql.tidb_runaway_quarantined_watch",
        "location": "../tidb/pkg/session/upgrade.go:1641:17"
      }
    ]
  },
  {
    "version": 173,
    "function": "upgradeToVer173",
    "changes": [
      {
        "type": "SQL",
        "sql": "ALTER TABLE mysql.tidb_background_subtask ADD COLUMN `summary` JSON",
        "location": "../tidb/pkg/session/upgrade.go:1647:20"
      }
    ]
  },
  {
    "version": 174,
    "function": "upgradeToVer174",
    "changes": [
      {
        "type": "SQL",
        "sql": "ALTER TABLE mysql.tidb_background_subtask_history ADD COLUMN `step` INT AFTER `id`",
        "location": "../tidb/pkg/session/upgrade.go:1651:20"
      },
      {
        "type": "SQL",
        "sql": "ALTER TABLE mysql.tidb_background_subtask_history ADD COLUMN `error` BLOB",
        "location": "../tidb/pkg/session/upgrade.go:1652:20"
      },
      {
        "type": "SQL",
        "sql": "ALTER TABLE mysql.tidb_background_subtask_history DROP INDEX `namespace`",
        "location": "../tidb/pkg/session/upgrade.go:1653:20"
      },
      {
        "type": "SQL",
        "sql": "ALTER TABLE mysql.tidb_background_subtask_history ADD INDEX `idx_task_key`(`task_key`)",
        "location": "../tidb/pkg/session/upgrade.go:1654:20"
      },
      {
        "type": "SQL",
        "sql": "ALTER TABLE mysql.tidb_background_subtask_history ADD INDEX `idx_state_update_time`(`state_update_time`)",
        "location": "../tidb/pkg/session/upgrade.go:1655:20"
      }
    ]
  },
  {
    "version": 179,
    "function": "upgradeToVer179",
    "changes": [
      {
        "type": "SQL",
        "sql": "ALTER TABLE mysql.global_variables MODIFY COLUMN `VARIABLE_VALUE` varchar(16383)",
        "location": "../tidb/pkg/session/upgrade.go:1747:20"
      }
    ]
  },
  {
    "version": 190,
    "function": "upgradeToVer190",
    "changes": [
      {
        "type": "SQL",
        "sql": "ALTER TABLE mysql.tidb_global_task ADD COLUMN `priority` INT DEFAULT 1 AFTER `state`",
        "location": "../tidb/pkg/session/upgrade.go:1751:20"
      },
      {
        "type": "SQL",
        "sql": "ALTER TABLE mysql.tidb_global_task ADD COLUMN `create_time` TIMESTAMP AFTER `priority`",
        "location": "../tidb/pkg/session/upgrade.go:1752:20"
      },
      {
        "type": "SQL",
        "sql": "ALTER TABLE mysql.tidb_global_task ADD COLUMN `end_time` TIMESTAMP AFTER `state_update_time`",
        "location": "../tidb/pkg/session/upgrade.go:1753:20"
      },
      {
        "type": "SQL",
        "sql": "ALTER TABLE mysql.tidb_global_task_history ADD COLUMN `priority` INT DEFAULT 1 AFTER `state`",
        "location": "../tidb/pkg/session/upgrade.go:1754:20"
      },
      {
        "type": "SQL",
        "sql": "ALTER TABLE mysql.tidb_global_task_history ADD COLUMN `create_time` TIMESTAMP AFTER `priority`",
        "location": "../tidb/pkg/session/upgrade.go:1755:20"
      },
      {
        "type": "SQL",
        "sql": "ALTER TABLE mysql.tidb_global_task_history ADD COLUMN `end_time` TIMESTAMP AFTER `state_update_time`",
        "location": "../tidb/pkg/session/upgrade.go:1756:20"
      },
      {
        "type": "SQL",
        "sql": "ALTER TABLE mysql.tidb_background_subtask ADD COLUMN `concurrency` INT AFTER `checkpoint`",
        "location": "../tidb/pkg/session/upgrade.go:1758:20"
      },
      {
        "type": "SQL",
        "sql": "ALTER TABLE mysql.tidb_background_subtask ADD COLUMN `create_time` TIMESTAMP AFTER `concurrency`",
        "location": "../tidb/pkg/session/upgrade.go:1759:20"
      },
      {
        "type": "SQL",
        "sql": "ALTER TABLE mysql.tidb_background_subtask ADD COLUMN `end_time` TIMESTAMP AFTER `state_update_time`",
        "location": "../tidb/pkg/session/upgrade.go:1760:20"
      },
      {
        "type": "SQL",
        "sql": "ALTER TABLE mysql.tidb_background_subtask ADD COLUMN `ordinal` int AFTER `meta`",
        "location": "../tidb/pkg/session/upgrade.go:1761:20"
      },
      {
        "type": "SQL",
        "sql": "ALTER TABLE mysql.tidb_background_subtask_history ADD COLUMN `concurrency` INT AFTER `checkpoint`",
        "location": "../tidb/pkg/session/upgrade.go:1762:20"
      },
      {
        "type": "SQL",
        "sql": "ALTER TABLE mysql.tidb_background_subtask_history ADD COLUMN `create_time` TIMESTAMP AFTER `concurrency`",
        "location": "../tidb/pkg/session/upgrade.go:1763:20"
      },
      {
        "type": "SQL",
        "sql": "ALTER TABLE mysql.tidb_background_subtask_history ADD COLUMN `end_time` TIMESTAMP AFTER `state_update_time`",
        "location": "../tidb/pkg/session/upgrade.go:1764:20"
      },
      {
        "type": "SQL",
        "sql": "ALTER TABLE mysql.tidb_background_subtask_history ADD COLUMN `ordinal` int AFTER `meta`",
        "location": "../tidb/pkg/session/upgrade.go:1765:20"
      },
      {
        "type": "SQL",
        "sql": "ALTER TABLE mysql.tidb_background_subtask ADD INDEX idx_exec_id(exec_id)",
        "location": "../tidb/pkg/session/upgrade.go:1767:20"
      },
      {
        "type": "SQL",
        "sql": "ALTER TABLE mysql.tidb_background_subtask ADD UNIQUE INDEX uk_task_key_step_ordinal(task_key, step, ordinal)",
        "location": "../tidb/pkg/session/upgrade.go:1768:20"
      },
      {
        "type": "SQL",
        "sql": "ALTER TABLE mysql.dist_framework_meta ADD COLUMN `cpu_count` INT DEFAULT 0 AFTER `role`",
        "location": "../tidb/pkg/session/upgrade.go:1770:20"
      },
      {
        "type": "SQL",
        "sql": "ALTER TABLE mysql.dist_framework_meta MODIFY COLUMN `host` VARCHAR(261)",
        "location": "../tidb/pkg/session/upgrade.go:1772:20"
      },
      {
        "type": "SQL",
        "sql": "ALTER TABLE mysql.tidb_background_subtask MODIFY COLUMN `exec_id` VARCHAR(261)",
        "location": "../tidb/pkg/session/upgrade.go:1773:20"
      },
      {
        "type": "SQL",
        "sql": "ALTER TABLE mysql.tidb_background_subtask_history MODIFY COLUMN `exec_id` VARCHAR(261)",
        "location": "../tidb/pkg/session/upgrade.go:1774:20"
      },
      {
        "type": "SQL",
        "sql": "ALTER TABLE mysql.tidb_global_task MODIFY COLUMN `dispatcher_id` VARCHAR(261)",
        "location": "../tidb/pkg/session/upgrade.go:1775:20"
      },
      {
        "type": "SQL",
        "sql": "ALTER TABLE mysql.tidb_global_task_history MODIFY COLUMN `dispatcher_id` VARCHAR(261)",
        "location": "../tidb/pkg/session/upgrade.go:1776:20"
      }
    ]
  },
  {
    "version": 194,
    "function": "upgradeToVer194",
    "changes": [
      {
        "type": "SQL",
        "sql": "DROP TABLE IF EXISTS mysql.load_data_jobs",
        "location": "../tidb/pkg/session/upgrade.go:1795:17"
      }
    ]
  },
  {
    "version": 196,
    "function": "upgradeToVer196",
    "changes": [
      {
        "type": "SQL",
        "sql": "ALTER TABLE mysql.tidb_global_task ADD COLUMN target_scope VARCHAR(256) DEFAULT '' AFTER `step`;",
        "location": "../tidb/pkg/session/upgrade.go:1803:20"
      },
      {
        "type": "SQL",
        "sql": "ALTER TABLE mysql.tidb_global_task_history ADD COLUMN target_scope VARCHAR(256) DEFAULT '' AFTER `step`;",
        "location": "../tidb/pkg/session/upgrade.go:1804:20"
      }
    ]
  },
  {
    "version": 198,
    "function": "upgradeToVer198",
    "changes": [
      {
        "type": "SQL",
        "sql": "ALTER TABLE mysql.tidb_mdl_info ADD COLUMN owner_id VARCHAR(64) NOT NULL DEFAULT '';",
        "location": "../tidb/pkg/session/upgrade.go:1812:20"
      }
    ]
  },
  {
    "version": 211,
    "function": "upgradeToVer211",
    "changes": [
      {
        "type": "SQL",
        "sql": "ALTER TABLE mysql.tidb_background_subtask_history ADD COLUMN `summary` JSON",
        "location": "../tidb/pkg/session/upgrade.go:1830:20"
      }
    ]
  },
  {
    "version": 212,
    "function": "upgradeToVer212",
    "changes": [
      {
        "type": "SQL",
        "sql": "ALTER TABLE mysql.tidb_runaway_watch ADD COLUMN `switch_group_name` VARCHAR(32) DEFAULT '' AFTER `action`;",
        "location": "../tidb/pkg/session/upgrade.go:1842:20"
      },
      {
        "type": "SQL",
        "sql": "ALTER TABLE mysql.tidb_runaway_watch_done ADD COLUMN `switch_group_name` VARCHAR(32) DEFAULT '' AFTER `action`;",
        "location": "../tidb/pkg/session/upgrade.go:1843:20"
      },
      {
        "type": "SQL",
        "sql": "ALTER TABLE mysql.tidb_runaway_queries ADD COLUMN `sql_digest` varchar(64) DEFAULT '' AFTER `original_sql`;",
        "location": "../tidb/pkg/session/upgrade.go:1847:20"
      },
      {
        "type": "SQL",
        "sql": "ALTER TABLE mysql.tidb_runaway_queries ADD COLUMN `repeats` int DEFAULT 1 AFTER `time`;",
        "location": "../tidb/pkg/session/upgrade.go:1849:20"
      },
      {
        "type": "SQL",
        "sql": "ALTER TABLE mysql.tidb_runaway_queries RENAME COLUMN `time` TO `start_time`",
        "location": "../tidb/pkg/session/upgrade.go:1851:20"
      },
      {
        "type": "SQL",
        "sql": "ALTER TABLE mysql.tidb_runaway_queries RENAME COLUMN `original_sql` TO `sample_sql`",
        "location": "../tidb/pkg/session/upgrade.go:1853:20"
      },
      {
        "type": "SQL",
        "sql": "ALTER TABLE mysql.tidb_runaway_queries MODIFY COLUMN `plan_digest` varchar(64) DEFAULT '';",
        "location": "../tidb/pkg/session/upgrade.go:1855:20"
      },
      {
        "type": "SQL",
        "sql": "ALTER TABLE mysql.tidb_runaway_queries MODIFY COLUMN `action` VARCHAR(64) NOT NULL;",
        "location": "../tidb/pkg/session/upgrade.go:1857:20"
      },
      {
        "type": "SQL",
        "sql": "ALTER TABLE mysql.tidb_runaway_watch ADD COLUMN `rule` VARCHAR(512) DEFAULT '' AFTER `switch_group_name`;",
        "location": "../tidb/pkg/session/upgrade.go:1859:20"
      },
      {
        "type": "SQL",
        "sql": "ALTER TABLE mysql.tidb_runaway_watch_done ADD COLUMN `rule` VARCHAR(512) DEFAULT '' AFTER `switch_group_name`;",
        "location": "../tidb/pkg/session/upgrade.go:1860:20"
      },
      {
        "type": "SQL",
        "sql": "ALTER TABLE mysql.tidb_runaway_queries ADD COLUMN `rule` VARCHAR(512) DEFAULT '' AFTER `tidb_server`;",
        "location": "../tidb/pkg/session/upgrade.go:1861:20"
      }
    ]
  },
  {
    "version": 216,
    "function": "upgradeToVer216",
    "changes": [
      {
        "type": "SQL",
        "sql": "UPDATE mysql.global_variables SET VARIABLE_VALUE='' WHERE VARIABLE_NAME = 'tidb_scatter_region' AND VARIABLE_VALUE = 'OFF'",
        "location": "../tidb/pkg/session/upgrade.go:1878:17"
      },
      {
        "type": "SQL",
        "sql": "UPDATE mysql.global_variables SET VARIABLE_VALUE='table' WHERE VARIABLE_NAME = 'tidb_scatter_region' AND VARIABLE_VALUE = 'ON'",
        "location": "../tidb/pkg/session/upgrade.go:1879:17"
      }
    ]
  },
  {
    "version": 217,
    "function": "upgradeToVer217",
    "changes": [
      {
        "type": "SQL",
        "sql": "INSERT IGNORE INTO mysql.global_variables VALUES ('tidb_schema_cache_size', 0)",
        "location": "../tidb/pkg/session/upgrade.go:1885:17"
      }
    ]
  },
  {
    "version": 239,
    "function": "upgradeToVer239",
    "changes": [
      {
        "type": "SQL",
        "sql": "ALTER TABLE mysql.tidb_global_task ADD COLUMN modify_params json AFTER `error`;",
        "location": "../tidb/pkg/session/upgrade.go:1893:20"
      },
      {
        "type": "SQL",
        "sql": "ALTER TABLE mysql.tidb_global_task_history ADD COLUMN modify_params json AFTER `error`;",
        "location": "../tidb/pkg/session/upgrade.go:1894:20"
      }
    ]
  },
  {
    "version": 241,
    "function": "upgradeToVer241",
    "changes": [
      {
        "type": "SQL",
        "sql": "ALTER TABLE mysql.user ADD INDEX i_user (user)",
        "location": "../tidb/pkg/session/upgrade.go:1913:20"
      },
      {
        "type": "SQL",
        "sql": "ALTER TABLE mysql.global_priv ADD INDEX i_user (user)",
        "location": "../tidb/pkg/session/upgrade.go:1914:20"
      },
      {
        "type": "SQL",
        "sql": "ALTER TABLE mysql.db ADD INDEX i_user (user)",
        "location": "../tidb/pkg/session/upgrade.go:1915:20"
      },
      {
        "type": "SQL",
        "sql": "ALTER TABLE mysql.tables_priv ADD INDEX i_user (user)",
        "location": "../tidb/pkg/session/upgrade.go:1916:20"
      },
      {
        "type": "SQL",
        "sql": "ALTER TABLE mysql.columns_priv ADD INDEX i_user (user)",
        "location": "../tidb/pkg/session/upgrade.go:1917:20"
      },
      {
        "type": "SQL",
        "sql": "ALTER TABLE mysql.global_grants ADD INDEX i_user (user)",
        "location": "../tidb/pkg/session/upgrade.go:1918:20"
      },
      {
        "type": "SQL",
        "sql": "ALTER TABLE mysql.default_roles ADD INDEX i_user (user)",
        "location": "../tidb/pkg/session/upgrade.go:1919:20"
      }
    ]
  },
  {
    "version": 243,
    "function": "upgradeToVer243",
    "changes": [
      {
        "type": "SQL",
        "sql": "ALTER TABLE mysql.tidb_global_task ADD COLUMN max_node_count INT DEFAULT 0 AFTER `modify_params`;",
        "location": "../tidb/pkg/session/upgrade.go:1941:20"
      },
      {
        "type": "SQL",
        "sql": "ALTER TABLE mysql.tidb_global_task_history ADD COLUMN max_node_count INT DEFAULT 0 AFTER `modify_params`;",
        "location": "../tidb/pkg/session/upgrade.go:1942:20"
      },
      {
        "type": "SQL",
        "sql": "ALTER TABLE mysql.tidb_global_task ADD COLUMN extra_params json AFTER max_node_count;",
        "location": "../tidb/pkg/session/upgrade.go:1943:20"
      },
      {
        "type": "SQL",
        "sql": "ALTER TABLE mysql.tidb_global_task_history ADD COLUMN extra_params json AFTER max_node_count;",
        "location": "../tidb/pkg/session/upgrade.go:1944:20"
      }
    ]
  },
  {
    "version": 244,
    "function": "upgradeToVer244",
    "changes": [
      {
        "type": "SQL",
        "sql": "ALTER TABLE mysql.user ADD COLUMN IF NOT EXISTS `Max_user_connections` INT UNSIGNED NOT NULL DEFAULT 0 AFTER `Password_lifetime`",
        "location": "../tidb/pkg/session/upgrade.go:1948:20"
      }
    ]
  },
  {
    "version": 245,
    "function": "upgradeToVer245",
    "changes": [
      {
        "type": "SQL",
        "sql": "ALTER TABLE mysql.bind_info MODIFY COLUMN original_sql LONGTEXT NOT NULL",
        "location": "../tidb/pkg/session/upgrade.go:1952:20"
      },
      {
        "type": "SQL",
        "sql": "ALTER TABLE mysql.bind_info MODIFY COLUMN bind_sql LONGTEXT NOT NULL",
        "location": "../tidb/pkg/session/upgrade.go:1953:20"
      }
    ]
  },
  {
    "version": 246,
    "function": "upgradeToVer246",
    "changes": [
      {
        "type": "SQL",
        "sql": `UPDATE mysql.bind_info SET plan_digest=null, sql_digest=null
                       WHERE (plan_digest, sql_digest) in (
                         select plan_digest, sql_digest from mysql.bind_info
                         group by plan_digest, sql_digest having count(1) > 1)`,
        "location": "../tidb/pkg/session/upgrade.go:1997:20"
      },
      {
        "type": "SQL",
        "sql": "ALTER TABLE mysql.bind_info MODIFY COLUMN sql_digest VARCHAR(64) DEFAULT NULL",
        "location": "../tidb/pkg/session/upgrade.go:2001:20"
      },
      {
        "type": "SQL",
        "sql": "ALTER TABLE mysql.bind_info MODIFY COLUMN plan_digest VARCHAR(64) DEFAULT NULL",
        "location": "../tidb/pkg/session/upgrade.go:2002:20"
      },
      {
        "type": "SQL",
        "sql": "ALTER TABLE mysql.bind_info ADD UNIQUE INDEX digest_index(plan_digest, sql_digest)",
        "location": "../tidb/pkg/session/upgrade.go:2003:20"
      }
    ]
  },
  {
    "version": 247,
    "function": "upgradeToVer247",
    "changes": [
      {
        "type": "SQL",
        "sql": "ALTER TABLE mysql.stats_meta ADD COLUMN last_stats_histograms_version bigint unsigned DEFAULT NULL",
        "location": "../tidb/pkg/session/upgrade.go:2007:20"
      }
    ]
  },
  {
    "version": 248,
    "function": "upgradeToVer248",
    "changes": [
      {
        "type": "SQL",
        "sql": "ALTER TABLE mysql.tidb_pitr_id_map ADD COLUMN restore_id BIGINT NOT NULL DEFAULT 0",
        "location": "../tidb/pkg/session/upgrade.go:2011:20"
      },
      {
        "type": "SQL",
        "sql": "ALTER TABLE mysql.tidb_pitr_id_map DROP PRIMARY KEY",
        "location": "../tidb/pkg/session/upgrade.go:2012:20"
      },
      {
        "type": "SQL",
        "sql": "ALTER TABLE mysql.tidb_pitr_id_map ADD PRIMARY KEY(restore_id, restored_ts, upstream_cluster_id, segment_id)",
        "location": "../tidb/pkg/session/upgrade.go:2013:20"
      }
    ]
  },
  {
    "version": 250,
    "function": "upgradeToVer250",
    "changes": [
      {
        "type": "SQL",
        "sql": "ALTER TABLE mysql.tidb_global_task ADD COLUMN `keyspace` varchar(64) DEFAULT '' AFTER `extra_params`",
        "location": "../tidb/pkg/session/upgrade.go:2021:20"
      },
      {
        "type": "SQL",
        "sql": "ALTER TABLE mysql.tidb_global_task ADD INDEX idx_keyspace(keyspace)",
        "location": "../tidb/pkg/session/upgrade.go:2022:20"
      },
      {
        "type": "SQL",
        "sql": "ALTER TABLE mysql.tidb_global_task_history ADD COLUMN `keyspace` varchar(64) DEFAULT '' AFTER `extra_params`",
        "location": "../tidb/pkg/session/upgrade.go:2023:20"
      },
      {
        "type": "SQL",
        "sql": "ALTER TABLE mysql.tidb_global_task_history ADD INDEX idx_keyspace(keyspace)",
        "location": "../tidb/pkg/session/upgrade.go:2024:20"
      }
    ]
  },
  {
    "version": 251,
    "function": "upgradeToVer251",
    "changes": [
      {
        "type": "SQL",
        "sql": "ALTER TABLE mysql.tidb_import_jobs ADD COLUMN `group_key` VARCHAR(256) NOT NULL DEFAULT '' AFTER `created_by`",
        "location": "../tidb/pkg/session/upgrade.go:2028:20"
      },
      {
        "type": "SQL",
        "sql": "ALTER TABLE mysql.tidb_import_jobs ADD INDEX idx_group_key(group_key)",
        "location": "../tidb/pkg/session/upgrade.go:2029:20"
      }
    ]
  },
  {
    "version": 252,
    "function": "upgradeToVer252",
    "changes": [
      {
        "type": "SQL",
        "sql": "ALTER TABLE mysql.bind_info CHANGE create_time create_time TIMESTAMP(6)",
        "location": "../tidb/pkg/session/upgrade.go:2033:20"
      },
      {
        "type": "SQL",
        "sql": "ALTER TABLE mysql.bind_info CHANGE update_time update_time TIMESTAMP(6)",
        "location": "../tidb/pkg/session/upgrade.go:2034:20"
      }
    ]
  },
  {
    "version": 253,
    "function": "upgradeToVer253",
    "changes": [
      {
        "type": "SQL",
        "sql": "ALTER TABLE mysql.bind_info ADD COLUMN last_used_date DATE DEFAULT NULL AFTER `plan_digest`",
        "location": "../tidb/pkg/session/upgrade.go:2038:20"
      }
    ]
  }
]
